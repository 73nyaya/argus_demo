<!DOCTYPE html>
<!-- saved from url=(0046)https://dashboard-sample-glencore.netlify.app/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Defect Summary Dashboard - Mincka ARGUS</title>
    <script src="./example_files/chart.js.download"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }
        
        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 24px;
            background: #1a1a1a;
            border-bottom: 3px solid #d4af37;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-text {
            font-size: 22px;
            font-weight: 600;
            color: #fff;
            letter-spacing: 2px;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .company-name {
            font-size: 18px;
            font-weight: 500;
            color: #fff;
            letter-spacing: 3px;
        }
        
        .user-icon {
            width: 36px;
            height: 36px;
            background: #d4af37;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .user-icon::before {
            content: "ðŸ‘¤";
            font-size: 18px;
        }
        
        /* Navigation */
        .nav-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 24px;
            background: #fff;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .nav-left {
            display: flex;
            align-items: center;
            gap: 24px;
        }
        
        .page-title {
            font-size: 28px;
            font-weight: 300;
            color: #333;
        }
        
        .nav-tabs {
            display: flex;
            gap: 0;
        }
        
        .nav-tab {
            padding: 10px 24px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            background: #f0f0f0;
            color: #666;
            transition: all 0.2s;
        }
        
        .nav-tab:first-child {
            border-radius: 4px 0 0 4px;
        }
        
        .nav-tab:last-child {
            border-radius: 0 4px 4px 0;
        }
        
        .nav-tab.active {
            background: #d4af37;
            color: #1a1a1a;
        }
        
        .nav-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        /* Toggle Switch */
        .toggle-container {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #f8f9fa;
            padding: 6px 12px;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }
        
        .toggle-label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }
        
        .toggle-switch {
            display: flex;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .toggle-option {
            padding: 6px 14px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            background: transparent;
            color: #666;
            transition: all 0.2s;
        }
        
        .toggle-option.active {
            background: #1a1a1a;
            color: #fff;
        }
        
        .toggle-option:hover:not(.active) {
            background: #d0d0d0;
        }
        
        .legend {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #666;
        }
        
        .legend-dot {
            width: 16px;
            height: 16px;
            border-radius: 2px;
        }
        
        /* Risk Rating Colors */
        .legend-dot.cat-1 { background: #c00000; }
        .legend-dot.cat-2 { background: #ed7d31; }
        .legend-dot.cat-3 { background: #ffc000; }
        .legend-dot.cat-4 { background: #00b050; }
        
        .action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
            color: #333;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background: #f5f5f5;
        }
        
        .export-btn {
            background: #1a1a1a;
            color: #fff;
            border: 1px solid #1a1a1a;
        }
        
        .export-btn:hover {
            background: #333;
        }
        
        /* Main Content */
        .main-content {
            padding: 24px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }
        
        /* Cards */
        .card {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            padding: 20px;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }
        
        /* KPI Cards Row */
        .kpi-row {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
        
        .kpi-card {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            padding: 20px;
            text-align: center;
            border-left: 6px solid;
        }
        
        .kpi-card.cat-1 { 
            border-left-color: #c00000; 
            background: linear-gradient(to right, rgba(192, 0, 0, 0.08), #fff);
        }
        .kpi-card.cat-2 { 
            border-left-color: #ed7d31; 
            background: linear-gradient(to right, rgba(237, 125, 49, 0.08), #fff);
        }
        .kpi-card.cat-3 { 
            border-left-color: #ffc000; 
            background: linear-gradient(to right, rgba(255, 192, 0, 0.08), #fff);
        }
        .kpi-card.cat-4 { 
            border-left-color: #00b050; 
            background: linear-gradient(to right, rgba(0, 176, 80, 0.08), #fff);
        }
        
        .kpi-value {
            font-size: 36px;
            font-weight: 700;
            color: #333;
        }
        
        .kpi-label {
            font-size: 13px;
            color: #666;
            margin-top: 4px;
            font-weight: 600;
        }
        
        .kpi-sublabel {
            font-size: 11px;
            color: #999;
            margin-top: 2px;
        }
        
        /* Donut Chart Container */
        .donut-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .donut-chart-wrapper {
            position: relative;
            width: 260px;
            height: 260px;
        }
        
        .donut-center-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        
        .donut-total {
            font-size: 32px;
            font-weight: 700;
            color: #333;
        }
        
        .donut-label {
            font-size: 12px;
            color: #666;
        }
        
        .chart-legend {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .chart-legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #666;
        }
        
        .chart-legend-box {
            width: 14px;
            height: 14px;
            border-radius: 2px;
        }
        
        /* Bar Chart */
        .bar-chart-container {
            height: 300px;
        }
        
        /* Horizontal Bar Chart */
        .hbar-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .hbar-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .hbar-label {
            width: 180px;
            font-size: 12px;
            color: #333;
            text-align: right;
            flex-shrink: 0;
        }
        
        .hbar-track {
            flex: 1;
            height: 24px;
            background: #f0f0f0;
            border-radius: 2px;
            display: flex;
            overflow: visible;
            position: relative;
        }
        
        .hbar-segment {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
            color: #fff;
            min-width: 0;
            transition: width 0.3s ease;
        }
        
        .hbar-segment.cat-1 { background: #c00000; }
        .hbar-segment.cat-2 { background: #ed7d31; }
        .hbar-segment.cat-3 { background: #ffc000; color: #333; }
        .hbar-segment.cat-4 { background: #00b050; }
        
        .hbar-total {
            width: 40px;
            font-size: 12px;
            font-weight: 600;
            color: #333;
            text-align: left;
        }
        
        /* Status Section */
        .status-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .status-section {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 16px;
        }
        
        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .status-title {
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }
        
        .status-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-badge.open {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-badge.completed {
            background: #d4edda;
            color: #155724;
        }
        
        .status-bars {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .status-bar-row {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-bar-label {
            width: 70px;
            font-size: 11px;
            color: #666;
        }
        
        .status-bar-track {
            flex: 1;
            height: 16px;
            background: #e9ecef;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .status-bar-fill {
            height: 100%;
            border-radius: 2px;
            transition: width 0.3s ease;
        }
        
        .status-bar-fill.cat-1 { background: #c00000; }
        .status-bar-fill.cat-2 { background: #ed7d31; }
        .status-bar-fill.cat-3 { background: #ffc000; }
        .status-bar-fill.cat-4 { background: #00b050; }
        
        .status-bar-value {
            width: 30px;
            font-size: 12px;
            font-weight: 600;
            color: #333;
            text-align: right;
        }
        
        /* Filter checkboxes */
        .filter-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #e0e0e0;
        }
        
        .filter-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #666;
        }
        
        .filter-item input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #d4af37;
        }
        
        /* Full width cards */
        .full-width {
            grid-column: 1 / -1;
        }
        
        /* Reference Boxes */
        .reference-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .reference-box {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 16px;
        }
        
        .reference-title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 8px;
        }
        
        .reference-scale {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .reference-item {
            padding: 10px;
            border-radius: 4px;
            font-size: 11px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .reference-item .color-bar {
            width: 6px;
            min-height: 40px;
            border-radius: 2px;
            flex-shrink: 0;
        }
        
        .reference-item .content {
            flex: 1;
        }
        
        .reference-item.cat-1 { background: rgba(192, 0, 0, 0.08); }
        .reference-item.cat-1 .color-bar { background: #c00000; }
        
        .reference-item.cat-2 { background: rgba(237, 125, 49, 0.08); }
        .reference-item.cat-2 .color-bar { background: #ed7d31; }
        
        .reference-item.cat-3 { background: rgba(255, 192, 0, 0.08); }
        .reference-item.cat-3 .color-bar { background: #ffc000; }
        
        .reference-item.cat-4 { background: rgba(0, 176, 80, 0.08); }
        .reference-item.cat-4 .color-bar { background: #00b050; }
        
        .reference-item-title {
            font-weight: 600;
            margin-bottom: 4px;
            color: #333;
        }
        
        .reference-item-desc {
            color: #666;
            line-height: 1.4;
        }
        
        .reference-item-score {
            font-size: 10px;
            color: #999;
            margin-top: 4px;
            font-weight: 500;
        }
        
        /* Footer note */
        .footer-note {
            grid-column: 1 / -1;
            text-align: center;
            font-size: 11px;
            color: #999;
            padding: 12px;
        }
        
        /* Print Styles */
        @media print {
            @page {
                size: letter landscape;
                margin: 10mm;
            }
            
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            
            body {
                background: #fff;
                zoom: 0.9;
            }
            
            .header {
                width: 100% !important;
                margin: 0 !important;
                padding: 12px 24px !important;
                box-sizing: border-box !important;
            }
            
            .nav-bar {
                width: 100% !important;
                margin: 0 !important;
                padding: 16px 24px !important;
                box-sizing: border-box !important;
            }
            
            .main-content {
                width: 100% !important;
                padding: 12px;
                gap: 12px;
            }
            
            .action-btn, .export-btn {
                display: none !important;
            }
            
            .toggle-container {
                border: none;
                background: transparent;
            }
            
            .toggle-switch {
                display: none;
            }
            
            .toggle-label::after {
                content: attr(data-current-view);
                font-weight: 600;
                margin-left: 8px;
            }
            
            .card {
                box-shadow: none;
                border: 1px solid #e0e0e0;
                break-inside: avoid;
            }
            
            .kpi-card {
                box-shadow: none;
                border: 1px solid #e0e0e0;
            }
            
            .kpi-row {
                gap: 12px;
            }
            
            .reference-container {
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <span class="logo-text">Mincka <span style="font-weight: 300;">ARGUS</span></span>
        </div>
        <div class="header-right">
            <span class="company-name">GLENCORE</span>
            <div class="user-icon"></div>
        </div>
    </header>
    
    <!-- Navigation -->
    <nav class="nav-bar">
        <div class="nav-left">
            <h1 class="page-title">Analytics</h1>
            <div class="nav-tabs">
                <button class="nav-tab">Cost Analysis</button>
                <button class="nav-tab active">Defect Summary</button>
                <button class="nav-tab">Remedial Actions</button>
            </div>
        </div>
        <div class="nav-right">
            <!-- Toggle Switch -->
            <div class="toggle-container">
                <span class="toggle-label" data-current-view="Risk Rating">View by:</span>
                <div class="toggle-switch">
                    <button class="toggle-option active" data-view="risk-rating" onclick="switchView(&#39;risk-rating&#39;)">Risk Rating</button>
                    <button class="toggle-option" data-view="severity-level" onclick="switchView(&#39;severity-level&#39;)">Severity Level</button>
                </div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-dot cat-1"></div>
                    <span id="legend-1">Very High</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot cat-2"></div>
                    <span id="legend-2">High</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot cat-3"></div>
                    <span id="legend-3">Medium</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot cat-4"></div>
                    <span id="legend-4">Low</span>
                </div>
            </div>
            
            <button class="action-btn export-btn" onclick="exportPDF()">
                <span>ðŸ“„</span> Export PDF
            </button>
            <button class="action-btn">
                <span>ðŸ“Š</span> Action Tasks
            </button>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main class="main-content">
        <!-- KPI Cards Row -->
        <div class="kpi-row">
            <div class="kpi-card cat-1">
                <div class="kpi-value" id="kpi-1-value">5</div>
                <div class="kpi-label" id="kpi-1-label">Very High Risk</div>
                <div class="kpi-sublabel" id="kpi-1-sublabel">Score 23-25</div>
            </div>
            <div class="kpi-card cat-2">
                <div class="kpi-value" id="kpi-2-value">18</div>
                <div class="kpi-label" id="kpi-2-label">High Risk</div>
                <div class="kpi-sublabel" id="kpi-2-sublabel">Score 17-22</div>
            </div>
            <div class="kpi-card cat-3">
                <div class="kpi-value" id="kpi-3-value">62</div>
                <div class="kpi-label" id="kpi-3-label">Medium Risk</div>
                <div class="kpi-sublabel" id="kpi-3-sublabel">Score 7-16</div>
            </div>
            <div class="kpi-card cat-4">
                <div class="kpi-value" id="kpi-4-value">55</div>
                <div class="kpi-label" id="kpi-4-label">Low Risk</div>
                <div class="kpi-sublabel" id="kpi-4-sublabel">Score 1-6</div>
            </div>
        </div>
        
        <!-- Defects by Risk Rating (Donut) -->
        <div class="card">
            <h2 class="card-title" id="donut-title">Defects by Risk Rating</h2>
            <div class="donut-container">
                <div class="donut-chart-wrapper">
                    <canvas id="donutChart" style="display: block; box-sizing: border-box; height: 260px; width: 260px;" width="325" height="325"></canvas>
                    <div class="donut-center-text">
                        <div class="donut-total">140</div>
                        <div class="donut-label">Total Defects</div>
                    </div>
                </div>
                <div class="chart-legend" id="donut-legend">
                    <div class="chart-legend-item">
                        <div class="chart-legend-box" style="background: #c00000;"></div>
                        <span id="donut-legend-1">Very High (5)</span>
                    </div>
                    <div class="chart-legend-item">
                        <div class="chart-legend-box" style="background: #ed7d31;"></div>
                        <span id="donut-legend-2">High (18)</span>
                    </div>
                    <div class="chart-legend-item">
                        <div class="chart-legend-box" style="background: #ffc000;"></div>
                        <span id="donut-legend-3">Medium (62)</span>
                    </div>
                    <div class="chart-legend-item">
                        <div class="chart-legend-box" style="background: #00b050;"></div>
                        <span id="donut-legend-4">Low (55)</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Defects by Risk Rating and Task Type -->
        <div class="card">
            <h2 class="card-title" id="bar-title">Defects by Risk Rating and Task Type</h2>
            <div class="bar-chart-container">
                <canvas id="barChart" style="display: block; box-sizing: border-box; height: 300px; width: 684.4px;" width="855" height="375"></canvas>
            </div>
            <div class="filter-row">
                <span style="font-size: 11px; color: #999;">C = Corrective &nbsp; | &nbsp; P = Preventive</span>
            </div>
        </div>
        
        <!-- Defects by Asset -->
        <div class="card">
            <h2 class="card-title" id="asset-title">Defects by Asset (by Risk Rating)</h2>
            <div class="hbar-container" id="asset-bars">
                    <div class="hbar-row">
                        <div class="hbar-label">KPBU01 - MP CHPP</div>
                        <div class="hbar-track"><div class="hbar-segment cat-1" style="width: 20px;">2</div><div class="hbar-segment cat-2" style="width: 50px;">5</div><div class="hbar-segment cat-3" style="width: 180px;">18</div><div class="hbar-segment cat-4" style="width: 150px;">15</div></div>
                        <div class="hbar-total">40</div>
                    </div>
                
                    <div class="hbar-row">
                        <div class="hbar-label">KFBU01 - M4 Building Structure</div>
                        <div class="hbar-track"><div class="hbar-segment cat-1" style="width: 10px;">1</div><div class="hbar-segment cat-2" style="width: 40px;">4</div><div class="hbar-segment cat-3" style="width: 130px;">13</div><div class="hbar-segment cat-4" style="width: 110px;">11</div></div>
                        <div class="hbar-total">29</div>
                    </div>
                
                    <div class="hbar-row">
                        <div class="hbar-label">KOCV15 - Overland Conveyor 15M</div>
                        <div class="hbar-track"><div class="hbar-segment cat-1" style="width: 10px;">1</div><div class="hbar-segment cat-2" style="width: 30px;">3</div><div class="hbar-segment cat-3" style="width: 100px;">10</div><div class="hbar-segment cat-4" style="width: 100px;">10</div></div>
                        <div class="hbar-total">24</div>
                    </div>
                
                    <div class="hbar-row">
                        <div class="hbar-label">KTCV09 - TLO Reclaim Conveyor</div>
                        <div class="hbar-track"><div class="hbar-segment cat-1" style="width: 10px;">1</div><div class="hbar-segment cat-2" style="width: 30px;">3</div><div class="hbar-segment cat-3" style="width: 80px;">8</div><div class="hbar-segment cat-4" style="width: 70px;">7</div></div>
                        <div class="hbar-total">19</div>
                    </div>
                
                    <div class="hbar-row">
                        <div class="hbar-label">KFCV18 - M4 Reject Conveyor</div>
                        <div class="hbar-track"><div class="hbar-segment cat-2" style="width: 20px;">2</div><div class="hbar-segment cat-3" style="width: 70px;">7</div><div class="hbar-segment cat-4" style="width: 70px;">7</div></div>
                        <div class="hbar-total">16</div>
                    </div>
                
                    <div class="hbar-row">
                        <div class="hbar-label">KFCV17 - M4 Product Conveyor</div>
                        <div class="hbar-track"><div class="hbar-segment cat-2" style="width: 10px;">1</div><div class="hbar-segment cat-3" style="width: 60px;">6</div><div class="hbar-segment cat-4" style="width: 50px;">5</div></div>
                        <div class="hbar-total">12</div>
                    </div>
                </div>
            <div class="filter-row" id="asset-filters">
                <label class="filter-item">
                    <input type="checkbox" checked="" onchange="toggleAssetFilter(0, this)"> <span class="filter-label-1">Very High</span>
                </label>
                <label class="filter-item">
                    <input type="checkbox" checked="" onchange="toggleAssetFilter(1, this)"> <span class="filter-label-2">High</span>
                </label>
                <label class="filter-item">
                    <input type="checkbox" checked="" onchange="toggleAssetFilter(2, this)"> <span class="filter-label-3">Medium</span>
                </label>
                <label class="filter-item">
                    <input type="checkbox" checked="" onchange="toggleAssetFilter(3, this)"> <span class="filter-label-4">Low</span>
                </label>
            </div>
        </div>
        
        <!-- Defects by Type -->
        <div class="card">
            <h2 class="card-title" id="defect-type-title">Defects by Defect Type (by Risk Rating)</h2>
            <div class="hbar-container" id="defect-type-bars">
                    <div class="hbar-row">
                        <div class="hbar-label">Steel Corrosion</div>
                        <div class="hbar-track"><div class="hbar-segment cat-1" style="width: 16px;">2</div><div class="hbar-segment cat-2" style="width: 48px;">6</div><div class="hbar-segment cat-3" style="width: 160px;">20</div><div class="hbar-segment cat-4" style="width: 176px;">22</div></div>
                        <div class="hbar-total">50</div>
                    </div>
                
                    <div class="hbar-row">
                        <div class="hbar-label">Steel Damage</div>
                        <div class="hbar-track"><div class="hbar-segment cat-1" style="width: 16px;">2</div><div class="hbar-segment cat-2" style="width: 32px;">4</div><div class="hbar-segment cat-3" style="width: 96px;">12</div><div class="hbar-segment cat-4" style="width: 96px;">12</div></div>
                        <div class="hbar-total">30</div>
                    </div>
                
                    <div class="hbar-row">
                        <div class="hbar-label">Structural Flaw/Deficiency</div>
                        <div class="hbar-track"><div class="hbar-segment cat-1" style="width: 8px;">1</div><div class="hbar-segment cat-2" style="width: 24px;">3</div><div class="hbar-segment cat-3" style="width: 64px;">8</div><div class="hbar-segment cat-4" style="width: 64px;">8</div></div>
                        <div class="hbar-total">20</div>
                    </div>
                
                    <div class="hbar-row">
                        <div class="hbar-label">Concrete Cracking</div>
                        <div class="hbar-track"><div class="hbar-segment cat-2" style="width: 16px;">2</div><div class="hbar-segment cat-3" style="width: 56px;">7</div><div class="hbar-segment cat-4" style="width: 48px;">6</div></div>
                        <div class="hbar-total">15</div>
                    </div>
                
                    <div class="hbar-row">
                        <div class="hbar-label">Concrete Spalling</div>
                        <div class="hbar-track"><div class="hbar-segment cat-2" style="width: 8px;">1</div><div class="hbar-segment cat-3" style="width: 40px;">5</div><div class="hbar-segment cat-4" style="width: 32px;">4</div></div>
                        <div class="hbar-total">10</div>
                    </div>
                
                    <div class="hbar-row">
                        <div class="hbar-label">Damaged Grouting</div>
                        <div class="hbar-track"><div class="hbar-segment cat-3" style="width: 80px;">10</div><div class="hbar-segment cat-4" style="width: 40px;">5</div></div>
                        <div class="hbar-total">15</div>
                    </div>
                </div>
            <div class="filter-row" id="defect-type-filters">
                <label class="filter-item">
                    <input type="checkbox" checked="" onchange="toggleDefectTypeFilter(0, this)"> <span class="filter-label-1">Very High</span>
                </label>
                <label class="filter-item">
                    <input type="checkbox" checked="" onchange="toggleDefectTypeFilter(1, this)"> <span class="filter-label-2">High</span>
                </label>
                <label class="filter-item">
                    <input type="checkbox" checked="" onchange="toggleDefectTypeFilter(2, this)"> <span class="filter-label-3">Medium</span>
                </label>
                <label class="filter-item">
                    <input type="checkbox" checked="" onchange="toggleDefectTypeFilter(3, this)"> <span class="filter-label-4">Low</span>
                </label>
            </div>
        </div>
        
        <!-- Open vs Completed -->
        <div class="card full-width">
            <h2 class="card-title" id="status-title">Open vs Completed Defects by Risk Rating</h2>
            <div class="status-grid">
                <div class="status-section">
                    <div class="status-header">
                        <span class="status-title">Open Defects</span>
                        <span class="status-badge open" id="open-total">89 Total</span>
                    </div>
                    <div class="status-bars" id="open-status-bars">
                    <div class="status-bar-row">
                        <span class="status-bar-label">Very High</span>
                        <div class="status-bar-track">
                            <div class="status-bar-fill cat-1" style="width: 10%;"></div>
                        </div>
                        <span class="status-bar-value">4</span>
                    </div>
                
                    <div class="status-bar-row">
                        <span class="status-bar-label">High</span>
                        <div class="status-bar-track">
                            <div class="status-bar-fill cat-2" style="width: 35%;"></div>
                        </div>
                        <span class="status-bar-value">14</span>
                    </div>
                
                    <div class="status-bar-row">
                        <span class="status-bar-label">Medium</span>
                        <div class="status-bar-track">
                            <div class="status-bar-fill cat-3" style="width: 100%;"></div>
                        </div>
                        <span class="status-bar-value">40</span>
                    </div>
                
                    <div class="status-bar-row">
                        <span class="status-bar-label">Low</span>
                        <div class="status-bar-track">
                            <div class="status-bar-fill cat-4" style="width: 77.5%;"></div>
                        </div>
                        <span class="status-bar-value">31</span>
                    </div>
                </div>
                </div>
                <div class="status-section">
                    <div class="status-header">
                        <span class="status-title">Completed Defects</span>
                        <span class="status-badge completed" id="completed-total">51 Total</span>
                    </div>
                    <div class="status-bars" id="completed-status-bars">
                    <div class="status-bar-row">
                        <span class="status-bar-label">Very High</span>
                        <div class="status-bar-track">
                            <div class="status-bar-fill cat-1" style="width: 2.5%;"></div>
                        </div>
                        <span class="status-bar-value">1</span>
                    </div>
                
                    <div class="status-bar-row">
                        <span class="status-bar-label">High</span>
                        <div class="status-bar-track">
                            <div class="status-bar-fill cat-2" style="width: 10%;"></div>
                        </div>
                        <span class="status-bar-value">4</span>
                    </div>
                
                    <div class="status-bar-row">
                        <span class="status-bar-label">Medium</span>
                        <div class="status-bar-track">
                            <div class="status-bar-fill cat-3" style="width: 55.00000000000001%;"></div>
                        </div>
                        <span class="status-bar-value">22</span>
                    </div>
                
                    <div class="status-bar-row">
                        <span class="status-bar-label">Low</span>
                        <div class="status-bar-track">
                            <div class="status-bar-fill cat-4" style="width: 60%;"></div>
                        </div>
                        <span class="status-bar-value">24</span>
                    </div>
                </div>
                </div>
            </div>
        </div>
        
        <!-- Reference Boxes -->
        <div class="card full-width">
            <div class="reference-container">
                <!-- Risk Rating Reference -->
                <div class="reference-box">
                    <div class="reference-title">Risk Rating Reference (GCAA Risk Matrix)</div>
                    <div class="reference-scale">
                        <div class="reference-item cat-1">
                            <div class="color-bar"></div>
                            <div class="content">
                                <div class="reference-item-title">Very High Risk</div>
                                <div class="reference-item-desc">Must be signed-off by Risk Owner, communicated and escalated to CEO, CFO, Head of Industrial Assets and General Counsel.</div>
                                <div class="reference-item-score">Risk Score: 23-25</div>
                            </div>
                        </div>
                        <div class="reference-item cat-2">
                            <div class="color-bar"></div>
                            <div class="content">
                                <div class="reference-item-title">High Risk</div>
                                <div class="reference-item-desc">Must be signed-off by Risk Owner, communicated and escalated to Industrial Lead, Group Functional Leads and Head of Industrial Assets.</div>
                                <div class="reference-item-score">Risk Score: 17-22</div>
                            </div>
                        </div>
                        <div class="reference-item cat-3">
                            <div class="color-bar"></div>
                            <div class="content">
                                <div class="reference-item-title">Medium Risk</div>
                                <div class="reference-item-desc">Implemented based on Return on Investment and/or agreement of Risk Owner, supported by consensus of risk assessment team.</div>
                                <div class="reference-item-score">Risk Score: 7-16</div>
                            </div>
                        </div>
                        <div class="reference-item cat-4">
                            <div class="color-bar"></div>
                            <div class="content">
                                <div class="reference-item-title">Low Risk</div>
                                <div class="reference-item-desc">Additional Risk Treatment should only be implemented if simple and inexpensive.</div>
                                <div class="reference-item-score">Risk Score: 1-6</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Severity Level Reference -->
                <div class="reference-box">
                    <div class="reference-title">Severity Level Reference (Fixed Structures Guideline)</div>
                    <div class="reference-scale">
                        <div class="reference-item cat-1">
                            <div class="color-bar"></div>
                            <div class="content">
                                <div class="reference-item-title">Critical</div>
                                <div class="reference-item-desc">Exceeded maximum tolerable limits. Failure probable within normal inspection frequency. Corrective action execution immediately.</div>
                                <div class="reference-item-score">Risk Score: 20-25</div>
                            </div>
                        </div>
                        <div class="reference-item cat-2">
                            <div class="color-bar"></div>
                            <div class="content">
                                <div class="reference-item-title">Abnormal</div>
                                <div class="reference-item-desc">Outside acceptable limits, but structure maintains adequate integrity. Corrective action planning should be initiated.</div>
                                <div class="reference-item-score">Risk Score: 11-19</div>
                            </div>
                        </div>
                        <div class="reference-item cat-3">
                            <div class="color-bar"></div>
                            <div class="content">
                                <div class="reference-item-title">Moderate</div>
                                <div class="reference-item-desc">Signs of deterioration from "as new" state but not severe enough to impact integrity. Preventive actions should be considered.</div>
                                <div class="reference-item-score">Risk Score: 4-10</div>
                            </div>
                        </div>
                        <div class="reference-item cat-4">
                            <div class="color-bar"></div>
                            <div class="content">
                                <div class="reference-item-title">Normal</div>
                                <div class="reference-item-desc">Within acceptable limits. No signs of excessive corrosion, wear, damage or deflection. No action required between normal inspection frequencies.</div>
                                <div class="reference-item-score">Risk Score: 1-3</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer-note">
            Sample data for validation purposes â€¢ Dashboard mockup based on GCAA Fixed Structures Guideline GCAA-625378177-18007 and GCAA Risk Matrix
        </div>
    </main>
    
    <script>
        // Data Configuration
        // Rule: Preventive = Low, Medium (Risk) / Normal, Moderate (Severity)
        // Rule: Corrective = Medium, High, Very High (Risk) / Moderate, Abnormal, Critical (Severity)
        const viewData = {
            'risk-rating': {
                labels: ['Very High', 'High', 'Medium', 'Low'],
                sublabels: ['Score 23-25', 'Score 17-22', 'Score 7-16', 'Score 1-6'],
                kpiValues: [5, 18, 62, 55],
                donutTitle: 'Defects by Risk Rating',
                barTitle: 'Defects by Risk Rating and Task Type',
                assetTitle: 'Defects by Asset (by Risk Rating)',
                defectTypeTitle: 'Defects by Defect Type (by Risk Rating)',
                statusTitle: 'Open vs Completed Defects by Risk Rating',
                // Corrective: Very High, High, Medium only (no Low)
                // Preventive: Medium, Low only (no Very High, High)
                correctiveData: [5, 18, 48, 0],
                preventiveData: [0, 0, 14, 55],
                assetData: [
                    { name: 'KPBU01 - MP CHPP', values: [2, 5, 18, 15] },
                    { name: 'KFBU01 - M4 Building Structure', values: [1, 4, 13, 11] },
                    { name: 'KOCV15 - Overland Conveyor 15M', values: [1, 3, 10, 10] },
                    { name: 'KTCV09 - TLO Reclaim Conveyor', values: [1, 3, 8, 7] },
                    { name: 'KFCV18 - M4 Reject Conveyor', values: [0, 2, 7, 7] },
                    { name: 'KFCV17 - M4 Product Conveyor', values: [0, 1, 6, 5] }
                ],
                defectTypeData: [
                    { name: 'Steel Corrosion', values: [2, 6, 20, 22] },
                    { name: 'Steel Damage', values: [2, 4, 12, 12] },
                    { name: 'Structural Flaw/Deficiency', values: [1, 3, 8, 8] },
                    { name: 'Concrete Cracking', values: [0, 2, 7, 6] },
                    { name: 'Concrete Spalling', values: [0, 1, 5, 4] },
                    { name: 'Damaged Grouting', values: [0, 0, 10, 5] }
                ],
                openData: [4, 14, 40, 31],
                completedData: [1, 4, 22, 24]
            },
            'severity-level': {
                labels: ['Critical', 'Abnormal', 'Moderate', 'Normal'],
                sublabels: ['Score 20-25', 'Score 11-19', 'Score 4-10', 'Score 1-3'],
                kpiValues: [8, 23, 67, 42],
                donutTitle: 'Defects by Severity Level',
                barTitle: 'Defects by Severity Level and Task Type',
                assetTitle: 'Defects by Asset (by Severity Level)',
                defectTypeTitle: 'Defects by Defect Type (by Severity Level)',
                statusTitle: 'Open vs Completed Defects by Severity Level',
                // Corrective: Critical, Abnormal only (no Moderate, no Normal)
                // Preventive: Moderate, Normal only (no Critical, no Abnormal)
                correctiveData: [8, 23, 0, 0],
                preventiveData: [0, 0, 67, 42],
                assetData: [
                    { name: 'KPBU01 - MP CHPP', values: [3, 7, 18, 12] },
                    { name: 'KFBU01 - M4 Building Structure', values: [2, 5, 14, 8] },
                    { name: 'KOCV15 - Overland Conveyor 15M', values: [1, 4, 12, 7] },
                    { name: 'KTCV09 - TLO Reclaim Conveyor', values: [1, 3, 9, 6] },
                    { name: 'KFCV18 - M4 Reject Conveyor', values: [1, 2, 8, 5] },
                    { name: 'KFCV17 - M4 Product Conveyor', values: [0, 2, 6, 4] }
                ],
                defectTypeData: [
                    { name: 'Steel Corrosion', values: [4, 9, 24, 13] },
                    { name: 'Steel Damage', values: [3, 6, 14, 7] },
                    { name: 'Structural Flaw/Deficiency', values: [1, 4, 10, 5] },
                    { name: 'Concrete Cracking', values: [0, 2, 8, 5] },
                    { name: 'Concrete Spalling', values: [0, 1, 5, 4] },
                    { name: 'Damaged Grouting', values: [0, 1, 6, 8] }
                ],
                openData: [7, 18, 42, 22],
                completedData: [1, 5, 25, 20]
            }
        };
        
        const colors = ['#c00000', '#ed7d31', '#ffc000', '#00b050'];
        
        let currentView = 'risk-rating';
        let donutChart, barChart;
        
        // Filter state for each chart section
        let assetFilters = [true, true, true, true];
        let defectTypeFilters = [true, true, true, true];
        
        // Initialize charts
        function initCharts() {
            const data = viewData[currentView];
            
            // Donut Chart
            const donutCtx = document.getElementById('donutChart').getContext('2d');
            donutChart = new Chart(donutCtx, {
                type: 'doughnut',
                data: {
                    labels: data.labels,
                    datasets: [{
                        data: data.kpiValues,
                        backgroundColor: colors,
                        borderWidth: 0,
                        cutout: '70%'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.raw / total) * 100).toFixed(1);
                                    return `${context.label}: ${context.raw} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
            
            // Bar Chart
            const barCtx = document.getElementById('barChart').getContext('2d');
            barChart = new Chart(barCtx, {
                type: 'bar',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'Corrective (C)',
                            data: data.correctiveData,
                            backgroundColor: '#2563eb',
                            borderWidth: 0
                        },
                        {
                            label: 'Preventive (P)',
                            data: data.preventiveData,
                            backgroundColor: '#9ca3af',
                            borderWidth: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { grid: { display: false } },
                        y: {
                            beginAtZero: true,
                            grid: { color: '#e0e0e0' },
                            ticks: { stepSize: 10 }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { boxWidth: 12, padding: 20 }
                        }
                    }
                }
            });
            
            // Setup filter event listeners
            setupFilterListeners();
            
            // Render horizontal bars
            renderHorizontalBars();
            renderStatusBars();
        }
        
        // Setup filter checkbox listeners
        function setupFilterListeners() {
            // Asset filters
            const assetFilterContainer = document.getElementById('asset-filters');
            if (assetFilterContainer) {
                assetFilterContainer.querySelectorAll('input[type="checkbox"]').forEach((checkbox, idx) => {
                    checkbox.addEventListener('change', (e) => {
                        assetFilters[idx] = e.target.checked;
                        renderHorizontalBars();
                    });
                });
            }
            
            // Defect type filters
            const defectTypeFilterContainer = document.getElementById('defect-type-filters');
            if (defectTypeFilterContainer) {
                defectTypeFilterContainer.querySelectorAll('input[type="checkbox"]').forEach((checkbox, idx) => {
                    checkbox.addEventListener('change', (e) => {
                        defectTypeFilters[idx] = e.target.checked;
                        renderHorizontalBars();
                    });
                });
            }
        }
        
        // Render horizontal bar charts
        function renderHorizontalBars() {
            const data = viewData[currentView];
            
            // Asset bars
            const assetContainer = document.getElementById('asset-bars');
            assetContainer.innerHTML = renderHBarRows(data.assetData, assetFilters);
            
            // Defect type bars
            const defectTypeContainer = document.getElementById('defect-type-bars');
            defectTypeContainer.innerHTML = renderHBarRows(data.defectTypeData, defectTypeFilters);
        }
        
        function renderHBarRows(items, filters) {
            // Calculate filtered totals for scaling
            const filteredTotals = items.map(item => 
                item.values.reduce((sum, val, idx) => sum + (filters[idx] ? val : 0), 0)
            );
            const maxTotal = Math.max(...filteredTotals, 1); // Avoid division by zero
            const scaleFactor = 400 / maxTotal;
            
            return items.map(item => {
                const filteredTotal = item.values.reduce((sum, val, idx) => sum + (filters[idx] ? val : 0), 0);
                const segments = item.values.map((val, idx) => {
                    if (val === 0 || !filters[idx]) return '';
                    const width = val * scaleFactor;
                    return `<div class="hbar-segment cat-${idx + 1}" style="width: ${width}px;">${val}</div>`;
                }).join('');
                
                return `
                    <div class="hbar-row">
                        <div class="hbar-label">${item.name}</div>
                        <div class="hbar-track">${segments}</div>
                        <div class="hbar-total">${filteredTotal}</div>
                    </div>
                `;
            }).join('');
        }
        
        // Render status bars (Open vs Completed)
        function renderStatusBars() {
            const data = viewData[currentView];
            
            const openTotal = data.openData.reduce((a, b) => a + b, 0);
            const completedTotal = data.completedData.reduce((a, b) => a + b, 0);
            
            document.getElementById('open-total').textContent = `${openTotal} Total`;
            document.getElementById('completed-total').textContent = `${completedTotal} Total`;
            
            // Find max value for scaling (across both open and completed)
            const maxValue = Math.max(...data.openData, ...data.completedData, 1);
            
            // Open bars
            const openContainer = document.getElementById('open-status-bars');
            openContainer.innerHTML = data.labels.map((label, idx) => {
                const value = data.openData[idx];
                const widthPercent = (value / maxValue) * 100;
                return `
                    <div class="status-bar-row">
                        <span class="status-bar-label">${label}</span>
                        <div class="status-bar-track">
                            <div class="status-bar-fill cat-${idx + 1}" style="width: ${widthPercent}%;"></div>
                        </div>
                        <span class="status-bar-value">${value}</span>
                    </div>
                `;
            }).join('');
            
            // Completed bars
            const completedContainer = document.getElementById('completed-status-bars');
            completedContainer.innerHTML = data.labels.map((label, idx) => {
                const value = data.completedData[idx];
                const widthPercent = (value / maxValue) * 100;
                return `
                    <div class="status-bar-row">
                        <span class="status-bar-label">${label}</span>
                        <div class="status-bar-track">
                            <div class="status-bar-fill cat-${idx + 1}" style="width: ${widthPercent}%;"></div>
                        </div>
                        <span class="status-bar-value">${value}</span>
                    </div>
                `;
            }).join('');
        }
        
        // Switch view
        function switchView(view) {
            currentView = view;
            const data = viewData[view];
            
            // Reset filters when switching views
            assetFilters = [true, true, true, true];
            defectTypeFilters = [true, true, true, true];
            
            // Reset all checkboxes to checked
            document.querySelectorAll('.filter-row input[type="checkbox"]').forEach(cb => {
                cb.checked = true;
            });
            
            // Update toggle buttons
            document.querySelectorAll('.toggle-option').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.view === view);
            });
            
            // Update toggle label for print
            document.querySelector('.toggle-label').dataset.currentView = 
                view === 'risk-rating' ? 'Risk Rating' : 'Severity Level';
            
            // Update legend
            data.labels.forEach((label, idx) => {
                document.getElementById(`legend-${idx + 1}`).textContent = label;
            });
            
            // Update KPI cards
            data.kpiValues.forEach((val, idx) => {
                document.getElementById(`kpi-${idx + 1}-value`).textContent = val;
                document.getElementById(`kpi-${idx + 1}-label`).textContent = data.labels[idx] + (view === 'risk-rating' ? ' Risk' : '');
                document.getElementById(`kpi-${idx + 1}-sublabel`).textContent = data.sublabels[idx];
            });
            
            // Update chart titles
            document.getElementById('donut-title').textContent = data.donutTitle;
            document.getElementById('bar-title').textContent = data.barTitle;
            document.getElementById('asset-title').textContent = data.assetTitle;
            document.getElementById('defect-type-title').textContent = data.defectTypeTitle;
            document.getElementById('status-title').textContent = data.statusTitle;
            
            // Update donut chart
            donutChart.data.labels = data.labels;
            donutChart.data.datasets[0].data = data.kpiValues;
            donutChart.update();
            
            // Update donut legend
            data.labels.forEach((label, idx) => {
                document.getElementById(`donut-legend-${idx + 1}`).textContent = `${label} (${data.kpiValues[idx]})`;
            });
            
            // Update bar chart
            barChart.data.labels = data.labels;
            barChart.data.datasets[0].data = data.correctiveData;
            barChart.data.datasets[1].data = data.preventiveData;
            barChart.update();
            
            // Update filter labels
            data.labels.forEach((label, idx) => {
                document.querySelectorAll(`.filter-label-${idx + 1}`).forEach(el => {
                    el.textContent = label;
                });
            });
            
            // Re-render horizontal bars
            renderHorizontalBars();
            renderStatusBars();
        }
        
        // Filter toggle functions
        function toggleAssetFilter(index, checkbox) {
            assetFilters[index] = checkbox.checked;
            renderHorizontalBars();
        }
        
        function toggleDefectTypeFilter(index, checkbox) {
            defectTypeFilters[index] = checkbox.checked;
            renderHorizontalBars();
        }
        
        // Export PDF
        function exportPDF() {
            window.print();
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', initCharts);
    </script>


</body></html>